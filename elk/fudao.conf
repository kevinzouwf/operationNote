# ============================================================
# INPUT
# ============================================================
input {
    beats {
        port => 5044
        }

}

# ============================================================
# FILTER
# ============================================================

filter {
#-----------------------------------------------------------
# fudao_student_nginx
# assistant_access
    if [type] == "fudao_student_assistant_access" {
    	grok {
		match => { "message" => "%{IPV4:frontend_addr} %{USER:ident} %{USER:auth} \[%{HTTPDATE:timestamp}\] \"(?:%{WORD:method} %{NOTSPACE:request} (?:HTTP/%{NUMBER:http_version})?|-)\" %{NUMBER:response} (?:%{NUMBER:bytes}) %{NOTSPACE:request_body} %{QS:referrer} \"(?:response\s*%{NOTSPACE:upstream_response_time})\" \"(?:request\s*%{NOTSPACE:request_time})\"%{QS:agent} \"%{IPV4:clientip}\" %{NOTSPACE:http_logid} %{NOTSPACE:http_trace}"}
       	 }
	geoip {
    		source => "clientip"
                target => "geoip" 
                add_field => [ "[geoip][coordinates]", "%{[geoip][longitude]}" ]
                add_field => [ "[geoip][coordinates]", "%{[geoip][latitude]}"  ]
                database => "/data/soft/logstash_5044/geoip/GeoLite2-City.mmdb" 
         }
	 mutate {
                    convert => { "upstream_response_time" => "float" }
                    convert => { "request_time" => "float" }
                    convert => { "[geoip][coordinates]" => "float" }
         }

	}
# android_access
    if [type] == "fudao_student_android_access" {
    	grok {
		match => { "message" => "%{IPV4:frontend_addr} %{USER:ident} %{USER:auth} \[%{HTTPDATE:timestamp}\] \"(?:%{WORD:method} %{NOTSPACE:request} (?:HTTP/%{NUMBER:http_version})?|-)\" %{NUMBER:response} (?:%{NUMBER:bytes}) %{NOTSPACE:request_body} %{QS:referrer} \"(?:response\s*%{NOTSPACE:upstream_response_time})\" \"(?:request\s*%{NOTSPACE:request_time})\"%{QS:agent} \"%{IPV4:clientip}\" %{NOTSPACE:http_logid} %{NOTSPACE:http_trace}"}
       	 }
	geoip {
    		source => "clientip"
                target => "geoip" 
                add_field => [ "[geoip][coordinates]", "%{[geoip][longitude]}" ]
                add_field => [ "[geoip][coordinates]", "%{[geoip][latitude]}"  ]
                database => "/data/soft/logstash_5044/geoip/GeoLite2-City.mmdb" 
         }
	 mutate {
                    convert => { "upstream_response_time" => "float" }
                    convert => { "[geoip][coordinates]" => "float" }
                    convert => { "request_time" => "float" }
         }

	}
# app_access
    if [type] == "fudao_student_app_access" {
    	grok {
		match => { "message" => "%{IPV4:frontend_addr} %{USER:ident} %{USER:auth} \[%{HTTPDATE:timestamp}\] \"(?:%{WORD:method} %{NOTSPACE:request} (?:HTTP/%{NUMBER:http_version})?|-)\" %{NUMBER:response} (?:%{NUMBER:bytes}) %{NOTSPACE:request_body} %{QS:referrer} \"(?:response\s*%{NOTSPACE:upstream_response_time})\" \"(?:request\s*%{NOTSPACE:request_time})\"%{QS:agent} \"%{IPV4:clientip}\" %{NOTSPACE:http_logid} %{NOTSPACE:http_trace}"}
       	 }
	geoip {
    		source => "clientip"
                target => "geoip" 
                add_field => [ "[geoip][coordinates]", "%{[geoip][longitude]}" ]
                add_field => [ "[geoip][coordinates]", "%{[geoip][latitude]}"  ]
                database => "/data/soft/logstash_5044/geoip/GeoLite2-City.mmdb" 
         }
	 mutate {
                    convert => { "upstream_response_time" => "float" }
                    convert => { "request_time" => "float" }
                    convert => { "[geoip][coordinates]" => "float" }
         }

	}
#-----------------------------------------------------------
# fudao_activity_nginx
    if [type] == "fudao_nginx_access" {
    	grok {
		match => { "message" => "%{IPV4:frontend_addr} %{USER:ident} %{USER:auth} \[%{HTTPDATE:timestamp}\] \"(?:%{WORD:method} %{NOTSPACE:request} (?:HTTP/%{NUMBER:http_version})?|-)\" %{NUMBER:response} (?:%{NUMBER:bytes}) %{NOTSPACE:request_body} %{QS:referrer} \"(?:response\s*%{NOTSPACE:upstream_response_time})\" \"(?:request\s*%{NOTSPACE:request_time})\"%{QS:agent} \"%{IPV4:clientip}\" %{NOTSPACE:http_logid} %{NOTSPACE:http_trace}"}
       	 }
	geoip {
    		source => "clientip"
                target => "geoip" 
                add_field => [ "[geoip][coordinates]", "%{[geoip][longitude]}" ]
                add_field => [ "[geoip][coordinates]", "%{[geoip][latitude]}"  ]
                database => "/data/soft/logstash_5044/geoip/GeoLite2-City.mmdb" 
         }
	 mutate {
                    convert => { "upstream_response_time" => "float" }
                    convert => { "[geoip][coordinates]" => "float" }
                    convert => { "request_time" => "float" }
         }

	}
    if [type] == "fudao_nginx_error" {
	grok {
             match => { "messages" => "(?<message>.*)"}
             }
	}
#-----------------------------------------------------------
#requestlog
    if [type] == "requestlog" {
       grok {    
             match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":%{BASE10NUM:request_time},\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
            }
	    mutate {
                    convert => { "request_time" => "float" }
                  }
    }
#-----------------------------------------------------------
#servicelog
	if [type] == "fudao_activity_service" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_img_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_service_account_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_service_course_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_console_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_service_transaction_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_student_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_teacher_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_weixin_student_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_classtool_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#fudao_crm: servicelog
        if [type] == "fudao_crm_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
         }
        if [type] == "fudao_clue_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
         }
        if [type] == "fudao_callcenter_servicelog" {
        grok {
              match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":(?<response_time>%{NUMBER}),\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
              #match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
             }
         }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#fudao_crm: servicelog
    if [type] == "fudao_crm_requestlog" {
       grok {    
             match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":%{BASE10NUM:request_time},\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
            }
	    mutate {
                    convert => { "request_time" => "float" }
                  }
    }
    if [type] == "fudao_clue_requestlog" {
       grok {    
             match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":%{BASE10NUM:request_time},\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
            }
	    mutate {
                    convert => { "request_time" => "float" }
                  }
    }
    if [type] == "fudao_callcenter_requestlog" {
       grok {    
             match => { "message" => "\[%{TIMESTAMP_ISO8601:timestamp}\] %{RUBY_LOGLEVEL:loglevel} %{NOTSPACE:application} \{\"response_time\":%{BASE10NUM:request_time},\"request_uri\":\"(?<request_uri>.*)\",\"request_header\":(?<request_header>\{.*\}),\"request_body\":(?<request_body>\{.*\}),\"response_body\":(?<response_body>\{.*\})\}"}
            }
	    mutate {
                    convert => { "request_time" => "float" }
                  }
    }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
}

#=============================================================================
# OUTPUT
#=============================================================================

output {
#-----------------------------------------------------------------------------
       if [type] == "fudao_student_assistant_access" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "logstash-fudao_student_assistant_access-%{+YYYY.MM.dd}"
                      }
       }
       if [type] == "fudao_student_app_access" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "logstash-fudao_student_app_access-%{+YYYY.MM.dd}"
                      }
       }
       if [type] == "fudao_student_android_access" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "logstash-fudao_student_android_access-%{+YYYY.MM.dd}"
                      }
       }

       if [type] == "fudao_nginx_access" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "logstash-fudao_nginx_access-%{+YYYY.MM.dd}"
                      }
       }

       if [type] == "fudao_nginx_error" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_nginx_error-%{+YYYY.MM.dd}"
                      }
       }
#-----------------------------------------------------------------------------
       if [type] == "requestlog" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_requestlog-%{+YYYY.MM.dd}"
                      }
       }
#-----------------------------------------------------------------------------
#fudao_crm:requestlog
       if [type] == "fudao_callcenter_requestlog" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_callcenter_requestlog-%{+YYYY.MM.dd}"
                      }
       }
       if [type] == "fudao_crm_requestlog" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_crm_requestlog-%{+YYYY.MM.dd}"
                      }
       }
       if [type] == "fudao_clue_requestlog" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_clue_requestlog-%{+YYYY.MM.dd}"
                      }
       }
#fudao_crm:servicelog
#
       if [type] == "fudao_crm_servicelog" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_crm_servicelog-%{+YYYY.MM.dd}"
                      }
       }
       if [type] == "fudao_clue_servicelog" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_clue_servicelog-%{+YYYY.MM.dd}"
                      }
       }
       if [type] == "fudao_callcenter_servicelog" {
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_callcenter_servicelog-%{+YYYY.MM.dd}"
                      }
       }
#-----------------------------------------------------------------------------
#servicelog output to files
	if [type] == "fudao_activity_service" {
        file {
           path => "/data/logs/junjunfudao/fudao_activity/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_service_account_servicelog" {
        file {
           path => "/data/logs/junjunfudao/service_account/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_service_course_servicelog" {
        file {
           path => "/data/logs/junjunfudao/service_course/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }

#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_console_servicelog" {
        file {
           path => "/data/logs/junjunfudao/console/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_service_transaction_servicelog" {
        file {
           path => "/data/logs/junjunfudao/service_transaction/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_student_servicelog" {
        file {
           path => "/data/logs/junjunfudao/student/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_teacher_servicelog" {
        file {
           path => "/data/logs/junjunfudao/teacher/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_weixin_student_servicelog" {
        file {
           path => "/data/logs/junjunfudao/weixin-student/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_classtool_servicelog" {
        file {
           path => "/data/logs/junjunfudao/service_classtool/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
	if [type] == "fudao_img_servicelog" {
        file {
           path => "/data/logs/junjunfudao/service_image/servicelog.log"
           codec => line { format => "%{message}"}
         }
	elasticsearch {
        	hosts => ['10.10.34.39', '10.10.11.106', '10.10.3.234', '10.10.22.181', '10.10.32.99'] 
       	 	index => "fudao_servicelog-%{+YYYY.MM.dd}"
                      }
        }
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
}

